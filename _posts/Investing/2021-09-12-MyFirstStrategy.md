---
layout: post
title:  "첫번째 퀀트투자 전략 : 하위20% 소형주 + 고성장 + 저벨류 + 고마진"
date: 2021-09-12 00:00:00
lastmod: 2021-09-12 00:00:00
categories: Investing
tags: Investing Quant-Investing
hidden: true
published: true
---

첫 퀀트 투자 전략으로 선택한 전략은 하위 20% 소형주, 고성장, 저벨류, 고마진 입니다.  

강환국님은 백테스트를 1만회 해보지 않은 사람하고는 겸상하지 말라고 하셨지만  
입문하는 단계이기 때문에 추천되지 않은 새로운 전략을 만들어보는 것은 불가능했고  
퀀트킹에서 추천하는 전략들을 가지고 몇가지 케이스를 만들어서 백테스트를 100회 정도 진행했습니다.  

그 중 [할수있다 알고투자](https://www.youtube.com/c/%ED%95%A0%EC%88%98%EC%9E%88%EB%8B%A4%EC%95%8C%EA%B3%A0%ED%88%AC%EC%9E%90/videos) 로부터 자주 설명 듣던 4선 저벨류 전략을 기준으로 삼고 (제가 보기에) 더 나은 전략을 찾아 봤습니다. 그 과정을 기록해봅니다.  

<!--more-->

투자 결과가 궁금하신 분들은 [첫번째 퀀트투자 결과](/investing/MyFirstStrategyResult.html) 페이지를 참고하시기 바랍니다.  

참고로 저는 퀀트 투자를 100% 신뢰하진 못하고 많은 의문점을 갖고 있습니다.  

  * 과거로 미래를 예측할 수 있을까?  
  * 심지어 코로나19 발생하면서 전 세계인의 삶이 변했는데..  
  * 가상화폐, 기상변화 등등 다양한 변화들이 생겨나는데..  
  * 백테스트 데이터에 구멍은 없을까? 백테스트 로직에 버그는 없을까?  
  * 등등

하지만 그 의문점들은 접어두고 다른 방법보다 퀀트 투자가 더 좋은 가능성을 가지고 있다고 생각하기로 하며 진행했습니다.  

다만, 자신 연구해본 전략을 검증하기 위해 백테스트를 하는 것인데  
저의 경우는 퀀트킹에서 추천하는 전략들을 백테스트 돌려보는 정도밖에 안된다는 것이 좀 아쉽습니다.  

강환국님이 [할수있다 퀀트투자](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=116836634) 책도 새로 냈다는데 좀 읽어보고 다른 분들의 책들도 좀 읽어보면서 지식을 쌓은 다음에나 백테스트를 올바르게 사용해볼 수 있을 것 같습니다.  

## 고정 요소

아래 요소는 통제변인 대상으로 모든 백테스팅에 동일하게 적용했습니다.  

  * 백테스트 툴 : [퀀트킹](http://www.quantking.co.kr)
  * 제외 업종 : 해외본사(중국기업 등), 스팩 업종
  * 거래정지시 손실처리율 : 100%
  * 매도수수료 : 1%
  * 14개년(2008~2021) 백테스팅 -> 누적수익률은 14개년 누적수익률

조작변인 대상으로는 전략, 리밸런싱 주기, 종목 개수, 소형주 기준이 있었습니다.  

  * 전략 : 4선 저벨류, 소성벨마
  * 리밸런싱 주기 : 11월~4월 보유, 분기별(3/31, 5/31, 8/31, 11/30)
  * 종목 개수 : 40, 30, 20 종목
  * 소형주 기준 : 시가총액 하위 30%, 20% 이하 

## 4선 저벨류 (저PER + 저PBR + 저PCR + 저PSR)

PER, PBR, PCR, PSR 가 낮은 종목을 선택하여 투자하는 전략입니다.  
그리고 부채비율이 너무 높은 종목은 제외합니다.  

  * 저벨류 : PER, PBR, PCR, PSR
  * 안전성 : 부채비율


### 4선 저벨류 VS 소형주 4선 저벨류

10월말 매수하여 4월말 매도하는 리밸런싱 주기로 40 종목을 보유한다고 하고  
4선 저벨류를 백테스팅 했을 때와 소형주만 대상으로 4선 저벨류를 백테스팅 했을 때를 비교해봤습니다.  

  * 종목 개수 : 40종목
  * 리밸런싱 주기 : 10월말 매수, 4월말 매도, 5~10월은 보유 안함

|로직|연평균수익률|월평균수익률|누적수익률|MDD|거래정지종목수|
|---|---:|---:|---:|---:|---:|
|4선저벨류|20.2%|3.3%|1,312.6%|28.0|4|
|4선저벨류+하위30%소형주|24.4%|3.9%|2,114.7%|26.1|3|


이미 강환국님 동영상에서 들었던 바와 같이 4선 저벨류를 가지고 소형주를 공략하면 수익률이 높아집니다.  


### 4선 저벨류 리밸런싱 : 11월~4월 VS 분기

리밸런싱 주기를 매 분기마다 하도록 설정 후 백테스팅하여 비교해봤습니다.  

  * 종목 개수 : 40종목
  * 리밸런싱 주기 : 분기별 매수, 매도 

|로직|리밸런싱|연평균수익률|월평균수익률|누적수익률|MDD|거래정지종목수|
|---|---|---:|---:|---:|---:|---:|
|4선저벨류|11월~4월보유|20.2%|3.3%|1,312.6%|28.0|4|
|4선저벨류+하위30%소형주|11월~4월보유|24.4%|3.9%|2,114.7%|26.1|3|
|4선저벨류|분기|22%|1.9%|1626.9%|48.8|2|
|4선저벨류+하위30%소형주|분기|27.6%|2.3%|3048.7%|47.6|15|


이 또한 강환국님 동영상에서 들었던 바와 같이 투자 기간을 두배로 늘렸지만 수익률 개선은 크지 않지만 MDD는 크게 나뻐집니다.  
또한 거래정지 종목수가 하위 30%소형주 분기별 리밸러닝에서 15까지 크게 치솟는 것을 볼 수 있습니다.  

<!--ads-->

## 소성벨마 (소형주 + 고성장 + 저벨류 + 고마진)

아래 항목들을 만족하는 종목들을 선택하여 투자하는 전략입니다.  

  * 소형주 : 시가총액 하위 30%
  * 고성장 : 매출액, 영업이익, 지배순이익 분기 증가율 (YOY & QOQ)
  * 저벨류 : PER, PBR
  * 고수익 : OPM, ROE
  * 안전성 : 부채비율

여러가지 추천 전략들을 백테스팅하다가 소성벨마 전략이 4선 저벨류보다 수익성이 높게 나오는 것을 발견했습니다.  


### 4선 저벨류 VS 소성벨마

하위 30%의 소형주 중 40개 종목을 10월말 매수하여 4월말 매도하는 리밸런싱 주기로 보유한다고 하고 4선 저벨류와 소성벨마 전략을 비교해봤습니다.  

|로직|연평균수익률|월평균수익률|누적수익률|MDD|거래정지종목수|
|---|---:|---:|---:|---:|---:|
|4선저벨류+하위30%소형주|24.4%|3.9%|2,114.7%|26.1|3|
|하위30% 소성벨마|28.8%|4.5%|3,461.3%|21.8|2|


소성벨마 전략이 수익성도 MDD도 더 좋게 나옵니다.  



### 소성벨마 리밸런싱 : 11월~4월 VS 분기 

하위 30%의 소형주 중 40개 종목을 소성벨마 전략을 사용하고 리밸런싱 주기를 달리해서 비교해봤습니다.  

|로직|리밸런싱|연평균수익률|월평균수익률|누적수익률|MDD|거래정지종목수|
|---|---|---:|---:|---:|---:|---:|
|하위30% 소성벨마|11월~4월보유|28.8%|4.5%|3,461.3%|21.8|2|
|하위30% 소성벨마|분기|39.3%|3.1%|10,317.0%|43.6|3|


월평균 수익률은 10월~4월만 보유하는 편이 4.5%로 1.3%가 더 높지만 투자기간이 6개월밖에 안되기 때문에  
연평균 수익률은 12개월간 분기 리밸런싱을 하는 경우가 39.3%로 10.5%가 더 높은 큰 차이를 보여줍니다.  

근데 분기 리밸런싱이 MDD가 43.3으로 거의 두배 높습니다.  

수익성과 MDD 중 어떤 것을 기준으로 리밸런싱 주기를 선택해야할까요?  

굉장히 고민스러운 주제이긴하지만 투자를 11월~4월만 하는가 아니면 1년 내내 하는가에 따른 MDD 차이라면 저는 크게 고민할 필요가 없다고 생각합니다.  

11월~4월만 투자할 때 MDD가 낮은 이유는 2008년~2020년 사이의 대규모 하락장이 5월~10월 내에 몰려있기 떄문이라고 합니다.  

하지만 미래에도 대규모 하락장이 5~10월 사이에 발생할 것이라는 보장은 없습니다.  
투자 시즌을 가지고 낮은 MDD 값을 찾아내는 백테스트는 미래를 예측하는데 큰 도움이 되지 않을 것 같습니다.  
MDD를 낮추기 위해서는 투자 시즌이 아닌 다른 전략이 필요해보입니다. 예를들어 1차원적으로 생각해보면 급격하게 15% 하락이 발생시 매도한다면 MDD를 15%로 낮출 수 있지 않을까 생각해봅니다. 근데 현재 사용 중인 퀀트킹으로는 불가능한 백테스트이고 해당 전략으로 자동으로 매도해주는 시스템을 아직 찾지 못했기 때문에 이에 대해서는 추후에 생각해보기로 합니다.  

결론은 소성벨마를 분기별로 리밸런싱 하는 것을 선택하기로 했습니다.  

<!--ads-->

### 소성벨마 소형주 기준 : 하위 30% VS 하위 20%

분기별로 리밸런싱하여 소성벨마 전략을 사용하기로 하고 소형주의 기준을 하위 30% 그리고 하위 20%와 비교해봤습니다.  
그리고 종목을 40개, 30개, 20개에 대해서도 확인해봤습니다.  

이 전까지는 나름 기준을 가지고 비교 후 전략을 선택해왔지만 이번에 다루는 내용에서는 저의 (똥)촉을 이용해서 전략을 선택합니다.  

|로직|종목|연평균수익률|월평균수익률|누적수익률|MDD|거래정지종목수|
|---|---|---:|---:|---:|---:|---:|
|하위30% 소성벨마|40종목|39.3%|3.1%|10,317.0%|43.6|3|
|하위30% 소성벨마|30종목|39.7%|3.1%|10,772.7%|48.4|2|
|하위30% 소성벨마|20종목|35.4%|2.9%|6,989.2%|50.2|1|
|하위20% 소성벨마|40종목|44.4%|3.4%|17,117.0%|38.4|6|
|하위20% 소성벨마|30종목|43.2%|3.3%|15,202.5%|39.1|1|
|하위20% 소성벨마|20종목|44.3%|3.4%|16,895.9%|42.1|2|


하위 20% 소형주가 수익성도 더 높고 MDD도 더 낮은 결과가 나왔습니다.  


하위 10%가도 해봤는데 사실 연평균수익률 50%까지 근접할 정도로 더 좋은 결과가 나옵니다.  
하지만 하위 10%라니 왠지 모를 불안함이 너무 큽니다. (똥촉1)

그리고 코스닥, 코스피의 모든 종목을 합치면 2400개 정도 되는데 그 중 10%면 240개 종목입니다.  
그 중 40개의 종목을 선택한다면 전체 종목 중 1/6을 매수하게 됩니다.  

절대적인 수치로 액기스 주식을 뽑는 것이 아니라  
꼴지 그룹내에서 그나마 괜찮은 상위 40개의 주식을 고르는 방식이기 떄문에  
절대 사면 안될 주식이 매수 종목에 포함될 가능성이 하위 10%에서 굉장히 높아진다고 생각합니다. (똥촉2)  
20개 종목만 선택한다 하더라도 전체 종목 중 1/12를 매수하게 되어 불안해보입니다. (똥촉3)  

하지만 하위 20%는 480개 종목 중 30개 종목을 매수한다면 1/16을 매수하는 것이고 20개 종목만 매수한다면 전체 중 1/24를 매수하는 것인데 저는 이 중에 20개 종목을 선택했습니다. (똥촉4)  

백테스팅시 매수 종목 개수를 너무 작게 잡으면 특수한 잡음을 넣는 과거 데이터가 더 크게 영향을 줄 수 있어서 왜곡된 결과를 뽑을 수 있습니다. 그래서 매수 종목 개수를 40개 정도로 크게 하면 좋은데 20개, 30개, 40개 종목의 백테스트 결과를 비교해 봤을 때 큰 차이가 없어보여서 어떤 것을 선택해도 될 것 같았습니다. 물론 14개년의 평균치이기 때문에 가려진 것이고 실제로 경험하면 그때는 굉장히 크게 느껴질 수도 있을 것 같습니다. (똥촉5)  

이렇게하여 결론적으로 하위 20%의 소성벨마 전략으로 20개 종목을 투자하기로 결정을 했습니다.  

|로직|종목|연평균수익률|월평균수익률|누적수익률|MDD|거래정지종목수|
|---|---|---:|---:|---:|---:|---:|
|하위20% 소성벨마|20종목|44.3%|3.4%|16,895.9%|42.1|2|

### 소성4벨마


소성벨마의 저벨류(PER, PBR) 대신 4선 저벨류(PER, PBR, PCR, PSR)로 해보면 결과가 어떨지 확인해봐야할 것 같아서  
시가총액 30%이하, 20%이하 그리고 종목 40개, 30개, 20개에 대해서 백테스팅 해봤습니다.  

결론은 저벨류로 하나 4선 저벨류로 하나 결과는 거의 비슷합니다. 저벨류가 수익성도 같거나 아주 약간 높고 MDD도 같거나 아주 약간 안정적입니다.  

결과도 거의 동일하니 퀀트킹에서 추천해준 소성벨마 방법으로 진행하기로 했습니다.  


