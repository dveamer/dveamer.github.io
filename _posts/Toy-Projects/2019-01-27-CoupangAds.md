---
layout: post
title: "Coupang Ads 개발기 - 쿠팡 파트너스를 Google Ads 처럼 만들기"
date: 2019-01-27 00:00:00
categories: ToyProject
tags: ToyProject 개발기
---

![Coupang](https://image12.coupangcdn.com/image/coupang/common/logo_coupang_w350.png){:class="imgTitle"}   
( 이미지 출처 : [Coupang](https://www.coupang.com) )  

[Coupang Ads by Dveamer](https://sda.dveamer.com/index.html) 개발 후기입니다.  

Coupang Ads by Dveamer는 쿠팡파트너스 광고를 블로그에 진열하는데 겪게 되는 어려움들을 해결해주는 서비스 입니다.  

정적인 쿠팡파트너스 광고를 마치 Google Ads처럼 주기적으로 변경해주고 구매 가능성이 높은 다양한 상품들을 노출시켜줍니다. 게다가 Google Ads 만큼이나 설정이 간단합니다.  

<!--more-->

[Coupang Ads by Dveamer](https://sda.dveamer.com/index.html) 홈페이지에서 더 자세한 소개와 사용법 등을 확인하실 수 있습니다.  

# 쿠팡 파트너스 

트위터에서 팔로잉 중인 @Outsideris님의 트윗을 통해서 1월 11일에 쿠팡 파트너스의 존재를 알게됐습니다.  

>> 오! 쿠팡 파트너스 승인되었다. 
>> 이제 파일 정리 글 쓰고 쿠팡에 휴지통 광고 같은 걸 연결하면 되는건가!!
>> 출처 : [@Outsideris 님의 "쿠팡 파트너스 승인" 트윗](https://twitter.com/Outsideris/status/1083697252541943808)

이 때는 "파일 정리 글"과 "휴지통 광고"의 연관관계를 잘 이해하지 못했지만 핵인싸인 @Outsideris님이 한다고하니 왠지모르게 나도 한번 해보고 싶어져서 블로그에 적용을 시작했고 곧 "파일 정리 글"과 "휴지통 광고"의 연관관계를 알게 되었습니다.  

## 블로그용 태그

[쿠팡 파트너스](https://partners.coupang.com/)에 가입을하고 승인이 되니 생각보다 쉽게 광고링크를 만들 수 있었고 이미지가 포함된 블로그용 태그도 만들 수 있었습니다. 블로그용 태그가 너무 얇길래 7개정도 만들어서 Google Ads 위에 뿌려주니 나쁘지만은 않았습니다.  

게다가 제 블로그는 프로그래밍 관련 글이 대부분이라 Google Ads는 예전부터 맨날 "프로그래밍 입문 교육" 광고만 띄워주는데 큰 효과는 없어보였고 "기계식 키보드" 같은 상품을 진열하면 사람들이 광클을 하지 않을까..? 라는 생각을 예전부터 해왔기 때문에 나름 재미를 느끼면서 열심히 상품들을 조회했습니다.  

근데 이게 시간이 엄청 걸리더군요. 골라놓고 봐도 다른 사이트와 비교해서 가격 경쟁력이 있는지도 확인하기가 쉽지 않고요. 상품을 몇개씩 찾아갈 수록 제가 왠지 쿠팡 직원이 할 일을 대신하고 있는 듯한 느낌도 들었습니다. 그리고 모든 글에 동일한 광고가 매일 똑같이 출력된다고 생각하니 막막했습니다.  

## 블로그에 부적합

쿠팡파트너스는 블로거들을 위한 배너형태의 광고수단은 아닌 것 같습니다.  

[https://coupa.ng/bguX7J](https://coupa.ng/bguX7J) 와 같은 형태의 광고링크는 1개의 상품에 연결되고 해당 URL을 통해 쿠팡에 접속해서 상품 구매가 발생해야 수익으로 이어집니다.  

특정 상품의 사용후기를 정성껏 작성했다면 해당 상품의 광고링크를 만들어서 홍보하면 효과가 있을 겁니다. 하지만 블로그의 글은 검색을 통해서 장기적으로 노출 됩니다. 만약 광고링크에서 연결된 상품이 가격이 변경되었거나 상품이 없어진다 하더라도 글 작성자가 알아채기는 쉽지 않습니다. 블로그와 달리 빠르고 짧게 소비되는 SNS에서는 나름 효과가 있을 것 같습니다.  

블로그 글을 위한 광고상품을 찾거나 광고상품을 위한 글을 쓰는 것은 너무나도 많은 노력을 요구하는 일입니다. 블로깅이라는 것이 결국 제 자신을 위한 것이긴하지만 그래도 직장 다니면서 한다는 것이 쉬운 일은 아닙니다. 그런데 광고를 위해 시간을 투자해야한다는 것은 합의할 수 없는 일이었습니다.  

쿠팡 파트너스를 블로그에서 사용하려면 Google Ads와 같은 매체가 필요하다고 생각을 했습니다.  
그리고 이왕이면 내 블로그만이 아닌 모든 사람들의 블로그에 적용할 수 있도록 만들어보기로 했습니다.  

## 구현작업

구현은 2일정도가 소요됐습니다.  

직장인이다보니 주중에 집중적으로 프로그래밍을 할 수는 없었고 일단 광고링크가 어떻게 돌아가는 것인지 관찰을 해봤습니다.  
결제와 환불을 몇차례 진행하며 수익으로 이어지는 필수 파라미터들을 파악했습니다. 덕분에 생수 2L 6통, 만두, 과자 등이 텅텅 비었던 냉장고를 채워가고 있습니다.  

어제(26일)는 테스트용 HTML과 서버를 만들고 크롤링을 진행했고 오늘은 서버를 AWS에 올리고 스크립트를 블로그에 적용하고 CDN, CORS등의 작업 등을 했습니다.  

Back-end는 이번에도 Python, Flask을 이용했고 Zappa를 이용해서 AWS Labda에 올렸습니다. 예전에는 업무로직을 작성하는 것보다 환경만들고 HTTP 서버를 띄우는데 시간이 많이 소요됐는데 이제는 AWS Lambda, Zappa를 이용하면 30분이면 간단한 업무로직 구현까지 완성이되서 너무 좋습니다. 지난번에 작성해둔 [Zappa를 이용해 AWS Lambda에 Flask 올리기](https://dveamer.github.io/backend/FlaskZappaAWSLambda.html) 글을 참고해서 쉽게 진행했습니다.  

내용은 고작 2개의 API만 존재할 정도로 단순합니다. 첫번째 API는 상품 리스트를 AWS DynamoDB에서 조회해서 상품 이미지 URI, 상품 정보, 암호화된 상품링크를 응답해줍니다. 이 과정에서 쿠팡파트너스 ID가 적용된 광고링크를 생성합니다. 두번째 API는 광고를 클릭시 상품링크를 복호화해서 쿠팡 사이트로 리다이렉트 시켜줍니다. 두번째 API를 굳이 만든 이유는 클릭 수와 클릭 상품을 모니터링 기능을 추후에 구현해보기 위해서입니다.  

CDN(CloudFront)을 통한 캐싱 작업과 Route53을 통한 DNS 작업은 토이프로젝트에서 매번 해오던 일이라서 이젠 익숙하게 금방 끝내는 것 같습니다. 이런 작업도 자동화하는 법을 찾아봐야할텐데 이미 손에 너무 잘 익혀져서 시작이 쉽지가 않네요.  

Front-end는 순수 Javascript, HTML, CSS로 진행했습니다. 직장에서 Front-end를 전문으로 하질 않다보니 익숙한 JQuery로 해결해버리고 싶었으나 내 블로그만이 아닌 다른 사람들의 블로그에 올릴 소스이다보니 최대한 가볍게 처리하고 싶어서 순수 Javascript로 진행했습니다.  

크롤링은 Python의 requests와 soup을 이용했습니다. 완벽하게 자동화해둔 것은 아니지만 손으로 하는 것보다는 1만배정도 빠른 것 같네요. 쿠팡파트너스가 기존의 룰을 버리면 이미 생성된 광고링크들이 연결을 못하게 되기 때문에 그럴 일은 거의 없겠지만 혹시 그런 일이 생긴다면 Puppeteer 를 이용해서 크롤링 후 광고링크를 생성하는 작업을 진행할 계획입니다.  


그리고 얼마전에 쿠팡 파트너스로부터 메일을 받은 건이 있습니다. 네이버 블로그에 걸어둔 쿠팡 광고가 수익으로 연결되지 않는 다는 내용이었습니다. 아직 확인해보진 못했지만 네이버 블로그에서 불필요하다고 자체적으로 판단되는 querystring 파라미터를 제거하기 떄문에 발생하는 건이라면, 제가 만든 [Coupang Ads by Dveamer](https://sda.dveamer.com/index.html)를 이용하면 문제 없이 링크 될 것으로 예상됩니다. 조만간 테스트해서 결과를 올리도록 하겠습니다.  

## 소감

토이 프로젝트라는 것이 실력향상, 경험 그리고 용돈벌이 등을 목적으로도 하지만 저는 만족감을 위해서 이기도 합니다.  
포켓몬고의 몬스터가 주변에 나타나면 알림을 주는 Perfect Trainer 앱을 만들었을 때도 제가 재미있게 하기 위해서 만들기는 했으나 그것이 주변 사람들에게도 동일하게 재미를 더 해준 다는 것이 굉장히 만족스러웠었습니다.  

이번에도 제 블로그에 광고를 달기 위해서 시작했지만 조금 더 다듬어서 다른 블로거들도 사용할 수 있도록 만들어봤습니다.  

많은 블로거 분들이 이용해주시고 많은 피드백을 받을 수 있으면 좋겠습니다.  


아.. 그리고 쿠팡 혹은 비슷한 온라인 쇼핑몰 관계자분이 이 글을 보신다면 모바일 광고 관련해서 꽤나 기발한 아이디어가 하나 있습니다. 몇년 전부터 갖고 있던 아이디어인데 개인으로서는 써먹을 방법이 없네요. 그렇다고 공짜로 공개할 수는 없고.. 그렇습니다.. 뻘쭘하네요 ㅋ  



